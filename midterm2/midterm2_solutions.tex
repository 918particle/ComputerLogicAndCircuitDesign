\title{Midterm 2 for COSC330/PHYS306 - Fall 2021}
\author{Dr. Jordan Hanson - Whittier College Dept. of Physics and Astronomy}
\date{\today}
\documentclass[10pt]{article}
\usepackage[a4paper, total={18cm, 27cm}]{geometry}
\usepackage{outlines}
\usepackage{graphicx}
\begin{document}
\maketitle

\section{Chapter 6 - Functions of Combinational Logic}
\label{sec:comb2}

\begin{enumerate}
\item Consider Fig. \ref{fig:4bit_wDelay}, in which a 4-bit adder is depicted.  Assuming a uniform worst-case delay of 8 ns from carry-in to carry-out for each stage, the total delay is 32 ns.  (a) At what maximum frequency can this circuit perform additions, if the delay must be less than a clock period? (b) What would the result in (a) be if the adder was extended to 8 bits? (c) Create a timing diagram showing the addition of the numbers in Fig. \ref{fig:4bit_wDelay}. \textbf{Bonus:} include the timing delays, and indicate the clock period.
\begin{figure}[ht]
\centering
\includegraphics[width=0.5\textwidth]{figures/4bitadder_withDelay.pdf}
\caption{\label{fig:4bit_wDelay} A schematic of a 4-bit adder with delays marked in nanoseconds.}
\end{figure}
\begin{itemize}
\item (a) If the total worst-case delay is 32 ns, then that implies a clock frequency of 1/32 GHz, or 31.25 MHz.
\item (b) If the number of adder stages is doubled, then the maximum frequency scales down by a factor of two, to 15.625 MHz.
\item (c) See below.
\begin{figure}[hb]
\centering
\includegraphics[width=0.225\textwidth]{figures/timingExample16.pdf}
\caption{\label{fig:solution1} Solution to Exercise 1c (with simulated delays).}
\end{figure}
\clearpage
\end{itemize}
\item Using AND, OR, XNOR, and inverter gates, (a) create a 2-bit comparator that yields True if $A > B$, (b) True if $A = B$, and (c) True if $A < B$.  For each circuit, assume both $A$ and $B$ are 2-bit binary positive numbers. (d) Wrap this all into one circuit with three outputs and 4 inputs.  \textit{Hint: use Karnaugh maps for parts (a)-(c) to simplify the gates.} \textit{See Fig. \ref{fig:solution2}}.
\begin{figure}
\centering
\includegraphics[width=0.3\textwidth]{figures/gateExample12.pdf}
\caption{\label{fig:solution2} Solution to Exercise 2.}
\end{figure}
\item Generate the logic gates that convert 4-bit gray code to 4-bit binary code, and show that it works with a timing diagram. \textit{See Fig. \ref{fig:solution3}.}
\begin{figure}[hb]
\centering
\includegraphics[width=0.3\textwidth]{figures/gateExample13.pdf}
\includegraphics[width=0.3\textwidth]{figures/timingExample17.pdf}
\caption{\label{fig:solution3} Solution to Exercise 3.}
\end{figure}
\item Consider Fig. \ref{fig:enc}, in which a decimal to binary conversion circuit is shown. (a) Add logic to the circuit such that it becomes a hexadecimal to binary converter. (b) Draw a logic symbol for this circuit with the correct number of inputs and outputs.  (c) Connect two hex-to-bin converters to a symbolic 2-to-1 multiplexer with the correct number of data select line(s) to form a system that can send two-digit hex numbers over one output line.
\begin{figure}[ht]
\centering
\includegraphics[width=0.35\textwidth]{figures/encoder.pdf}
\includegraphics[width=0.2\textwidth]{figures/gateExample14.pdf}
\includegraphics[width=0.4\textwidth]{figures/design5.pdf}
\caption{\label{fig:enc} (Left) A decimal to binary encoder circuit. (Middle and Right) Solution to Exercise 4.}
\end{figure}
\begin{figure}[hb]
\centering
\includegraphics[width=0.75\textwidth]{figures/design6.pdf}
\caption{\label{fig:enc2} Solution to Exercise 4c.  There are two hexadecimal to binary converters, each feeding into four 2-to-1 multiplexers, to switch between the upper number and the lower number.  Each 2-to-1 multiplexer only needs one data-select line, controlled by the signal \textit{First/Second}.  If this signal is HIGH or LOW, the first or second number is selected, respectively.  This signal should oscillate at some frequency, $f$.  Finally, a counter that oscillates at $4f$ is needed to change the bits from 4-bit parallel to 4-bit serial structure.  The 4 parallel-bits are fed to a 4-to-1 multiplexer, where they are converted to a serial signal.}
\end{figure}
\end{enumerate}

\clearpage

\section{Chapter 7 - Latches, Flip-flops, and Timers}
\label{sec:latch}
\begin{enumerate}
\item Consider Fig. \ref{fig:twoDFF}, in which a divide-by-four frequency divider is depicted with D flip-flops and a CLK signal. (a) Elaborate on this circuit to create a circuit that can divide the clock frequency by 2, 4, or 8. Show the flip-flops explicitly.  (b) Develop a symbol for the 2-4-8-16 divider, with CLK signal input and four ouputs (one each for $f/2$, $f/4$, $f/8$, and $f/8$, where $f$ is the clock frequency). (c) Connect the symbol for the new part to a symbolic 4-to-1 multiplexer with the appropriate number of data select lines to form a clock division system.  (d) Show with a timing diagram the output if the user changes the data select lines at least once.  For parts (b)-(d), it is only necessary to show symbols rather than individual flip-flops.
\begin{figure}[ht]
\centering
\includegraphics[width=0.5\textwidth]{figures/twoDFF.pdf}
\includegraphics[width=0.45\textwidth,trim=0cm 4cm 0cm 1cm,clip=true]{figures/design7.pdf}
\caption{\label{fig:twoDFF} (Left) Two D flip-flops forming a frequency divider. (Right) Solution to Exercise 1 (a).}
\end{figure}
\begin{itemize}
\item (a) See Fig. \ref{fig:twoDFF} (right).  The data-select lines enable the frequency outputs.  These outputs could be fed into a final OR gate to limit the outputs to one line.
\item (b) See Fig. \ref{fig:twoDFF2} (left).
\item (c) See Fig. \ref{fig:twoDFF2} (right).
\item (d) See Fig. \ref{fig:twoDFF3}.
\end{itemize}
\begin{figure}[ht]
\centering
\includegraphics[width=0.25\textwidth]{figures/design8.pdf}
\includegraphics[width=0.45\textwidth]{figures/design9.pdf}
\caption{\label{fig:twoDFF2} (Left) Solution to Exercise 1 (b).  (Right) Solution to Exercise 1 (c).}
\end{figure}
\begin{figure}[hb]
\centering
\includegraphics[width=0.65\textwidth]{figures/timingExample18.pdf}
\caption{\label{fig:twoDFF3} Solution to Exercise 1 (d).  The user switches the data select signal at clock cycle 8, changing the frequency from 1/2 CLK to 1/8 CLK.}
\end{figure}
\end{enumerate}

\clearpage

\section{Chapters 8 and 9 - Shift Registers and Counters}

\begin{enumerate}
\item Consider the timing diagram in Fig. \ref{fig:sr1}.  Using any combination of \textit{shift registers} and supporting gates, create a circuit with 8-outputs that produces this timing diagram. \\
\begin{figure}[ht]
\centering
\includegraphics[width=0.45\textwidth]{figures/timingExample15.pdf}
\includegraphics[width=0.5\textwidth]{figures/design10.pdf}
\caption{\label{fig:sr1} (Left) A waveform that repeats every 16 clock periods. (Right) One possible solution to Exercise 1.}
\end{figure}
\textit{Fig. \ref{fig:sr2} contains a timing diagram corresponding to Fig. \ref{fig:sr1} (right).  Two bi-directional shift registers are OR'd in parallel, and initially are cleared.  One bit is loaded into one shift-register and shifted across the OR array.  At the right moment, that bit is lost and a new bit is added to the other register.  That bit travels in the register in the opposite direction.  A solution could be devised using only one bi-directional shift register, however the shifting would have to be ``paused'' for one clock cycle (cycles 7 and 8).  That is, with one register, the timing would be off when the bit turns around.  Alternatively, we could just OR one register with itself, and cleverly connect the outputs to avoid the timing issue.}
\begin{figure}[ht]
\centering
\includegraphics[width=0.9\textwidth]{figures/timingExample19.pdf}
\caption{\label{fig:sr2} A timing diagram corresponding to Fig. \ref{fig:sr1} (right).}
\end{figure}
\item Consider Fig. \ref{fig:SRG8}, in which 4 and 5-bit Johnson counters are depicted.  (a) Create a circuit based on Fig. \ref{fig:SRG8} called a \textit{combinatoric trigger.}  Imagine four digital channels A, B, C, and D, as inputs.  The output of the circuit should be True if \textit{any two} of the four channels is True \textit{within 100 ns of each other.}  Develop any necessary logic symbols, and use the appropriate clock frequency.  The Johnson counter(s) can have any number of bits.
\begin{figure}[hb]
\centering
\includegraphics[width=0.8\textwidth]{figures/SRG8.pdf}
\caption{\label{fig:SRG8} (Left) 4 and 5-bit Johnson counters. (Right) The timing diagram for the 4-bit case.}
\end{figure}
\end{enumerate}

\end{document}